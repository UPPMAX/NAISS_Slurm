# Content

This directory contains test scripts for use in the NAISS course "Running jobs on clusters". 

They should all run out of the box, except that you need to add your project ID to them first. 

## Directories and files

- `dependency/` 
  - `depend.sh`: Example of a script that checks that a batch job (here running `matrix-gen.sh` has finished before the next job may start (here running `mmmult-v2.sh`). This works even when you do not know the job ID of the first job. This script can just be run from the command line. Make sure the two batch script mentioned have been setup with your project ID. We talk about dependencies in the section "Introduction to Slurm". 
  - `matrix-gen.py`: Python script for generating two matrices.
  - `matrix-gen.sh`: Batch script that runs the `matrix-gen.py` script. Serial code. Used for the dependencies example script in the section "Introduction to Slurm".
  - `mmmult.py`: This is a Python script to do matrix-matrix multiplication. This version also generates the two matrices. 
  - `mmmult.sh`: This batch script is used to run `mmmult.py`. It is a batch serial script which is used as an example of a serial script in the "Sample job scripts" section. 
  - `mmmult-v2.py`: This is a Python script to do matrix-matrix multiplication. This version loads pre-generated matrices (generated by either `matrix-gen.py` or `small-matrix-gen.py`). 
  - `mmmult-v2.sh`: This batch script is used to run `mmmult-v2.py`. It is a serial batch script which is used in the dependency example (in the "Introduction to Slurm" section). 
  - `small-matrix-gen.py`: Python script for generating two (smaller) matrices. 
  - `small-matrix-gen.sh`: Batch script that runs the `small-matrix-gen.py` script. Serial code. Used for the dependencies example in the section "Introduction to Slurm".

- `serial/` 
  - `first.sh`: Example (serial) script to use for testing many of the Slurm commands in the section "Introduction to Slurm". Also example script for a first job in same section. 
  - `simple.sh`: This is a simple serial batch script used (like first.sh) for testing some of the Slurm commands in the section "Introduction to Slurm". 

- `OpenMP/` 
  - `omp_hello.c`: This is a simple OpenMP C code. It is used in the `OpenMP.sh` batch script. 
  - `OpenMP.sh`: This batch script is compiling and running the `omp_hello.c` C code. As default, it uses 8 tasks. It also sets `OMP_NUM_THREADS` to the same value as `-c`. 

- `MPI/` 
  - `MPI.sh`: This is a simple MPI batch script example. 
  - `mpi_hello.c`: a simple MPI hello world code. Check the `Makefile` and `build.sh` files on how to compile the code.
  - `mpi_hello.c` is a batch script to run the MPI code above. 
  - `integration2D_f90.f90` is a code that performs 2D numerical integration. Check the `Makefile` and `build.sh` files on how to compile the code.
  - `run_integration2D.sh` is a batch script to run the MPI code above.

- `job-array/`
  - `hello-world-array.py`: Python script used by `hello-world-array.sh`. 
  - `hello-world-array.sh`: Batch script for an array job (running `hello-world-array.sh`). Used in the section "Sample job scripts" under "Job Arrays". 

- `GPU-hello-world/` 
  - `hello_world_gpu.cpp`: Simple C++ code using HIP.
  - `hello_world_gpu.sh`: Batch script for running the `hello_world_gpu.cpp` code (that code is also being compiled within the batch script).

- `GPU-HIP-example/` 
  - `hip-example.py`: Python HIP script that uses GPUs.
  - `hip-example.sh`: GPU batch script for Python script that use hip (the above script). Used in the section "Sample job scripts" under "GPU jobs".

